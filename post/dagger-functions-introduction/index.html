<!doctype html><html lang=ko-KR dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Dagger란 Code로 CI/CD Pipeline을 만들고, 플렛폼에 종속적이지 않도록 Pipeline을 실행 할 수 있게 해주는 오픈소스 툴이다. Dagger Engine이 DinD 방식으로 각 Pipeline을 Container로 격리시켜 플렛폼에 종속적이지 않으며, 캐싱이 가능한 것이 특징이다. Benefit으로 &amp;lsquo;No More YAML Soup&amp;rsquo;과 &amp;lsquo;Eliminate Push And Pray&amp;rsquo;가 인상적이다.
프로젝트 초창기부터 관심을 가지고 있었으나, CUE를 사용했던 시절에는 CUE에 대한 허들이 너무 높아서 사용을 포기했었고, Go SDK가 나온 다음에는 사용성이 좋아졌으나, Pipeline을 만들기 위해 작은것 하나하나를 전부 스스로 만들어내야하는 불편함이 있었다."><title>Dagger Functions와 함께하는 CI/CD Pipeline as Code</title><link rel=canonical href=https://blog.seungyeop-lee.com/post/dagger-functions-introduction/><link rel=stylesheet href=/scss/style.min.93f2e0e012ccfc3ca0232e3587ef9287067d9084bbef1356a9c0e52c44cc08db.css><meta property="og:title" content="Dagger Functions와 함께하는 CI/CD Pipeline as Code"><meta property="og:description" content="Dagger란 Code로 CI/CD Pipeline을 만들고, 플렛폼에 종속적이지 않도록 Pipeline을 실행 할 수 있게 해주는 오픈소스 툴이다. Dagger Engine이 DinD 방식으로 각 Pipeline을 Container로 격리시켜 플렛폼에 종속적이지 않으며, 캐싱이 가능한 것이 특징이다. Benefit으로 &amp;lsquo;No More YAML Soup&amp;rsquo;과 &amp;lsquo;Eliminate Push And Pray&amp;rsquo;가 인상적이다.
프로젝트 초창기부터 관심을 가지고 있었으나, CUE를 사용했던 시절에는 CUE에 대한 허들이 너무 높아서 사용을 포기했었고, Go SDK가 나온 다음에는 사용성이 좋아졌으나, Pipeline을 만들기 위해 작은것 하나하나를 전부 스스로 만들어내야하는 불편함이 있었다."><meta property="og:url" content="https://blog.seungyeop-lee.com/post/dagger-functions-introduction/"><meta property="og:site_name" content="펭귄의 외부 저장소"><meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="Dagger"><meta property="article:tag" content="Dagger Functions"><meta property="article:tag" content="Daggerverse"><meta property="article:tag" content="CI/CD Pipeline as Code"><meta property="article:published_time" content="2024-05-07T00:00:00+00:00"><meta property="article:modified_time" content="2024-05-08T00:00:00+00:00"><meta property="og:image" content="https://blog.seungyeop-lee.com/post/dagger-functions-introduction/cover.jpeg"><meta name=twitter:site content="@@xbeast7"><meta name=twitter:creator content="@@xbeast7"><meta name=twitter:title content="Dagger Functions와 함께하는 CI/CD Pipeline as Code"><meta name=twitter:description content="Dagger란 Code로 CI/CD Pipeline을 만들고, 플렛폼에 종속적이지 않도록 Pipeline을 실행 할 수 있게 해주는 오픈소스 툴이다. Dagger Engine이 DinD 방식으로 각 Pipeline을 Container로 격리시켜 플렛폼에 종속적이지 않으며, 캐싱이 가능한 것이 특징이다. Benefit으로 &amp;lsquo;No More YAML Soup&amp;rsquo;과 &amp;lsquo;Eliminate Push And Pray&amp;rsquo;가 인상적이다.
프로젝트 초창기부터 관심을 가지고 있었으나, CUE를 사용했던 시절에는 CUE에 대한 허들이 너무 높아서 사용을 포기했었고, Go SDK가 나온 다음에는 사용성이 좋아졌으나, Pipeline을 만들기 위해 작은것 하나하나를 전부 스스로 만들어내야하는 불편함이 있었다."><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://blog.seungyeop-lee.com/post/dagger-functions-introduction/cover.jpeg"><link rel="shortcut icon" href=/favicon.ico><script async src="https://www.googletagmanager.com/gtag/js?id=G-HGMQJP4T94"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-HGMQJP4T94",{anonymize_ip:!1})}</script></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"light")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="메뉴 여닫기">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu9777283d0b785254b12ffb8c3f9befa6_920044_300x0_resize_box_3.png width=300 height=300 class=site-logo loading=lazy alt=Avatar></a></figure><div class=site-meta><h1 class=site-name><a href=/>펭귄의 외부 저장소</a></h1><h2 class=site-description>읽은 것, 본 것, 배운 것, 삽질, etc</h2></div></header><ol class=social-menu><li><a href=https://github.com/seungyeop-lee target=_blank title=Github rel=me><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=mailto:me@seungyeop-lee.com target=_blank title=mail rel=me><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-mail" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 7a2 2 0 012-2h14a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2V7z"/><path d="M3 7l9 6 9-6"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg><span>Home</span></a></li><li><a href=/archives><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg><span>Archives</span></a></li><li><a href=/search><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg><span>Search</span></a></li><li><a href=/links><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg><span>Links</span></a></li><li><a href=https://github.com/seungyeop-lee><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg><span>Github</span></a></li><li><a href=mailto:me@seungyeop-lee.com><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-mail" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 7a2 2 0 012-2h14a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2V7z"/><path d="M3 7l9 6 9-6"/></svg><span>Email</span></a></li><div class=menu-bottom-section><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><span>다크 모드</span></li></div></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">목차</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#dagger-소개>Dagger 소개</a><ol><li><a href=#dagger-사용-예시>Dagger 사용 예시</a></li></ol></li><li><a href=#dagger-functions-소개>Dagger Functions 소개</a><ol><li><a href=#dagger-functions-장점>Dagger Functions 장점</a></li></ol></li><li><a href=#dagger-functions-시작하기>Dagger Functions 시작하기</a><ol><li><a href=#dagger-설치>Dagger 설치</a></li><li><a href=#dagger-module-만들기>Dagger Module 만들기</a></li><li><a href=#dagger-function-작성>Dagger Function 작성</a></li><li><a href=#daggerverse-활용>Daggerverse 활용</a></li></ol></li><li><a href=#마무리>마무리</a></li><li><a href=#ref>ref.</a></li></ol></nav></div></section></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/post/dagger-functions-introduction/><img src=/post/dagger-functions-introduction/cover_hu36a4104b1b56267b3d4b21da993a5ccf_193931_800x0_resize_q75_box.jpeg srcset="/post/dagger-functions-introduction/cover_hu36a4104b1b56267b3d4b21da993a5ccf_193931_800x0_resize_q75_box.jpeg 800w, /post/dagger-functions-introduction/cover_hu36a4104b1b56267b3d4b21da993a5ccf_193931_1600x0_resize_q75_box.jpeg 1600w" width=800 height=800 loading=lazy alt="Featured image of post Dagger Functions와 함께하는 CI/CD Pipeline as Code"></a></div><div class=article-details><header class=article-category><a href=/categories/tools/>Tools</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/post/dagger-functions-introduction/>Dagger Functions와 함께하는 CI/CD Pipeline as Code</a></h2></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg><time class=article-time--published>May 07, 2024</time></div></footer></div></header><section class=article-content><p><a class=link href=https://dagger.io/ title=Dagger target=_blank rel=noopener>Dagger</a>란 Code로 CI/CD Pipeline을 만들고, 플렛폼에 종속적이지 않도록 Pipeline을 실행 할 수 있게 해주는 오픈소스 툴이다.
Dagger Engine이 DinD 방식으로 각 Pipeline을 Container로 격리시켜 플렛폼에 종속적이지 않으며, 캐싱이 가능한 것이 특징이다.
Benefit으로 &lsquo;No More YAML Soup&rsquo;과 &lsquo;Eliminate Push And Pray&rsquo;가 인상적이다.</p><p>프로젝트 초창기부터 관심을 가지고 있었으나, CUE를 사용했던 시절에는 CUE에 대한 허들이 너무 높아서 사용을 포기했었고,
Go SDK가 나온 다음에는 사용성이 좋아졌으나, Pipeline을 만들기 위해 작은것 하나하나를 전부 스스로 만들어내야하는 불편함이 있었다.</p><p>최근에 Dagger Functions와 다른 사람들이 만든 Dagger Functions를 모듈로 설치해서 사용 할 수있는 <a class=link href=https://daggerverse.dev/ title=Daggerverse target=_blank rel=noopener>Daggerverse</a>가 출시되면서 사용성이 좋아졌다고 느꼈다.
동아리에서 만드는 서비스의 CI/CD를 Dagger를 이용해 구축해보면서 이제는 확실히 사용 할 만하다고 느껴졌고, 구축에 필요했지만 없던 몇몇 모듈은 Daggerverse에 배포도 해보았다. (<a class=link href=https://daggerverse.dev/mod/github.com/seungyeop-lee/daggerverse/ssh title="Daggerverse - ssh" target=_blank rel=noopener>ssh</a>, <a class=link href=https://daggerverse.dev/mod/github.com/seungyeop-lee/daggerverse/scp title="Daggerverse - scp" target=_blank rel=noopener>scp</a>, <a class=link href=https://daggerverse.dev/mod/github.com/seungyeop-lee/daggerverse/private-git title="Daggerverse - private-git" target=_blank rel=noopener>private-git</a>)</p><p>좀 더 많은 사람들이 Dagger를 사용했으면 하는 바람으로 Dagger와 Dagger Functions를 소개하는 글을 작성한다.</p><h2 id=dagger-소개>Dagger 소개</h2><ul><li><a class=link href=https://blog.outsider.ne.kr/1642 title="CI/CD 파이프라인 엔진 Dagger" target=_blank rel=noopener>Outsider님의 소개글</a>을 참고하길 바란다.</li><li>현재는 CUE를 버리고, Go, Python, Typescript SDK를 제공한다.</li></ul><h3 id=dagger-사용-예시>Dagger 사용 예시</h3><ul><li>빌드, 테스트, 배포, 보안 검사 등 다양한 CI/CD 작업을 자동화하는 데 사용할 수 있다.</li><li>예를 들어<ul><li>Go 프로젝트 빌드 및 테스트</li><li>Docker 이미지 빌드 및 배포</li><li>Kubernetes 클러스터에 애플리케이션 배포</li><li>취약성 검사</li><li>그외, 컨테이너를 통해 구동 할 수 있는 모든 것</li></ul></li></ul><h2 id=dagger-functions-소개>Dagger Functions 소개</h2><p>Dagger Functions는 CI/CD Pipeline을 구성하는 기본 요소다.
즉, CI/CD Pipeline은 Dagger Function(이하 Function)을 조립하여 만들 수 있다.</p><h3 id=dagger-functions-장점>Dagger Functions 장점</h3><ul><li>작은 작업을 캡슐화하여 Pipeline의 복잡도를 낮추고, 재사용이 가능해진다.</li><li>서로 다른 언어에서 만든 Function을 사용하는 것이 가능하다.<ul><li>ex. Go SDK로 만든 Function을 Typescript SDK로 만든 Pipeline에 사용 가능</li></ul></li><li>Daggerverse를 통해 미리 만들어진 Function을 사용하는 것이 가능하여 Pipeline 구축이 용이하다.</li></ul><h2 id=dagger-functions-시작하기>Dagger Functions 시작하기</h2><p>본 실습은 MacOS, Docker Desktop 환경에서 진행하는 것을 가정합니다.
Windows 사용시에는 그에 맞는 명령어로 변환해서 실습해주세요.</p><p>Go SDK를 사용하여 Function을 작성합니다.</p><h3 id=dagger-설치>Dagger 설치</h3><p><a class=link href=https://docs.dagger.io/install title="Dagger Installation" target=_blank rel=noopener>Dagger Installation</a> 문서를 참고하여 설치한다.</p><h3 id=dagger-module-만들기>Dagger Module 만들기</h3><ol><li>폴더를 만든다.<ul><li><code>mkdir my-module</code></li></ul></li><li>폴더로 이동한다.<ul><li><code>cd my-module</code></li></ul></li><li>모듈을 초기화 한다.<ul><li><code>dagger init --sdk go --source . --name my-module</code></li></ul></li></ol><h3 id=dagger-function-작성>Dagger Function 작성</h3><ol><li><code>main.go</code> 파일의 내용을 모두 지우고, 아래의 코드를 붙여 넣는다.</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>MyModule</span> <span class=kd>struct</span><span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>m</span> <span class=o>*</span><span class=nx>MyModule</span><span class=p>)</span> <span class=nf>Hello</span><span class=p>(</span><span class=nx>name</span> <span class=kt>string</span><span class=p>)</span> <span class=kt>string</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=nx>fmt</span><span class=p>.</span><span class=nf>Sprintf</span><span class=p>(</span><span class=s>&#34;Hello, %s!&#34;</span><span class=p>,</span> <span class=nx>name</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>m</span> <span class=o>*</span><span class=nx>MyModule</span><span class=p>)</span> <span class=nf>GitClone</span><span class=p>(</span><span class=nx>url</span> <span class=kt>string</span><span class=p>)</span> <span class=o>*</span><span class=nx>Directory</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=nx>dag</span><span class=p>.</span><span class=nf>Git</span><span class=p>(</span><span class=nx>url</span><span class=p>).</span><span class=nf>Branch</span><span class=p>(</span><span class=s>&#34;main&#34;</span><span class=p>).</span><span class=nf>Tree</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><ol start=2><li>실행 가능한 Function을 확인한다.<ul><li><code>dagger functions</code></li></ul></li><li><code>hello</code> Function을 실행하고 결과를 확인한다.<ul><li><code>dagger call hello --name "World"</code></li><li><code>Hello, World!</code> 가 출력</li></ul></li><li><code>git-clone</code> Function을 실행하고 결과를 확인한다.<ul><li><code>dagger call git-clone --url=https://github.com/seungyeop-lee/daggerverse.git -o daggerverse</code></li><li><code>daggerverse</code> 폴더에 Clone된 파일들을 확인 할 수 있음</li></ul></li></ol><h3 id=daggerverse-활용>Daggerverse 활용</h3><p>ssh 모듈을 설치하고, ssh를 이용해 원격의 서버에 명령어를 실행하도록 한다.</p><ol><li>ssh 모듈을 설치한다.<ul><li><code>dagger install github.com/seungyeop-lee/daggerverse/ssh</code></li></ul></li><li><code>main.go</code> 파일에 아래의 코드를 추가한다.</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>m</span> <span class=o>*</span><span class=nx>MyModule</span><span class=p>)</span> <span class=nf>SshCommand</span><span class=p>(</span>
</span></span><span class=line><span class=cl>	<span class=nx>ctx</span> <span class=nx>context</span><span class=p>.</span><span class=nx>Context</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=nx>address</span> <span class=kt>string</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=nx>password</span> <span class=kt>string</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=nx>command</span> <span class=kt>string</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>)</span> <span class=p>(</span><span class=kt>string</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nx>output</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>dag</span><span class=p>.</span><span class=nf>SSH</span><span class=p>().</span>
</span></span><span class=line><span class=cl>		<span class=nf>Config</span><span class=p>(</span><span class=nx>address</span><span class=p>).</span>
</span></span><span class=line><span class=cl>		<span class=nf>WithPassword</span><span class=p>(</span><span class=nx>dag</span><span class=p>.</span><span class=nf>SetSecret</span><span class=p>(</span><span class=s>&#34;password&#34;</span><span class=p>,</span> <span class=nx>password</span><span class=p>)).</span>
</span></span><span class=line><span class=cl>		<span class=nf>Command</span><span class=p>(</span><span class=nx>command</span><span class=p>).</span>
</span></span><span class=line><span class=cl>		<span class=nf>Stdout</span><span class=p>(</span><span class=nx>ctx</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=s>&#34;&#34;</span><span class=p>,</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=nx>output</span><span class=p>,</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><ol start=3><li>실행 가능한 Function에 <code>ssh-command</code>가 추가 되었는지 확인한다.<ul><li><code>dagger functions</code></li></ul></li><li><code>ssh-command</code> Function을 실행하고 결과를 확인한다.<ul><li><code>dagger call -v ssh-command --address="user@your_server_address" --password="user_password" --command="ls -al"</code></li><li><code>ls -al</code>의 결과가 출력된다.</li></ul></li></ol><p>Note 1. 본 실습에서는 password를 단순 입력했으나, 실제로는 secret을 사용해야 한다. 자세한 사항은 <a class=link href=https://docs.dagger.io/manuals/developer/go/203021/secrets title="Dagger docs - Secrets" target=_blank rel=noopener>Dagger Docs/Secrets 문서</a> 참조</p><p>Note 2. 본 실습은 <a class=link href=https://github.com/seungyeop-lee/blog-example/tree/main/dagger-function-introduction title="dagger-functions-introduction 예제" target=_blank rel=noopener>git repository</a>에 동일하게 올라와있으니 참고</p><h2 id=마무리>마무리</h2><p>Dagger와 Dagger Functions를 간단히 알아보았다.
더 자세히 알고 싶으면 Dagger 공식 문서의 <a class=link href=https://docs.dagger.io/quickstart title="Dagger docs - Quickstart" target=_blank rel=noopener>Quickstart</a> 및 <a class=link href=https://docs.dagger.io/manuals/user title="Dagger docs - User Manual" target=_blank rel=noopener>User Manual</a>, <a class=link href=https://docs.dagger.io/manuals/developer title="Dagger docs - Developer Manual" target=_blank rel=noopener>Developer Manual</a>을 참고하길 바란다.</p><h2 id=ref>ref.</h2><ul><li><a class=link href=https://dagger.io/ title=Dagger target=_blank rel=noopener>Dagger</a></li><li><a class=link href=https://daggerverse.dev/ title=Daggerverse target=_blank rel=noopener>Daggerverse</a><ul><li><a class=link href=https://daggerverse.dev/mod/github.com/seungyeop-lee/daggerverse/ssh title="Daggerverse - ssh" target=_blank rel=noopener>ssh</a></li><li><a class=link href=https://daggerverse.dev/mod/github.com/seungyeop-lee/daggerverse/scp title="Daggerverse - scp" target=_blank rel=noopener>scp</a></li><li><a class=link href=https://daggerverse.dev/mod/github.com/seungyeop-lee/daggerverse/private-git title="Daggerverse - private-git" target=_blank rel=noopener>private-git</a></li></ul></li><li><a class=link href=https://blog.outsider.ne.kr/1642 title="CI/CD 파이프라인 엔진 Dagger" target=_blank rel=noopener>Outsider&rsquo;s Dev Story - CI/CD 파이프라인 엔진 Dagger</a></li><li>Dagger Docs<ul><li><a class=link href=https://docs.dagger.io/install title="Dagger Installation" target=_blank rel=noopener>Install</a></li><li><a class=link href=https://docs.dagger.io/manuals/developer/go/203021/secrets title="Dagger docs - Secrets" target=_blank rel=noopener>Secrets</a></li><li><a class=link href=https://docs.dagger.io/quickstart title="Dagger docs - Quickstart" target=_blank rel=noopener>Quickstart</a></li><li><a class=link href=https://docs.dagger.io/manuals/user title="Dagger docs - User Manual" target=_blank rel=noopener>User Manual</a></li><li><a class=link href=https://docs.dagger.io/manuals/developer title="Dagger docs - Developer Manual" target=_blank rel=noopener>Developer Manual</a></li></ul></li><li><a class=link href=https://github.com/seungyeop-lee/blog-example/tree/main/dagger-function-introduction title="dagger-functions-introduction 예제" target=_blank rel=noopener>dagger-functions-introduction 예제</a></li></ul></section><footer class=article-footer><section class=article-tags><a href=/tags/dagger/>Dagger</a>
<a href=/tags/dagger-functions/>Dagger Functions</a>
<a href=/tags/daggerverse/>Daggerverse</a>
<a href=/tags/ci/cd-pipeline-as-code/>CI/CD Pipeline as Code</a></section><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg><span>Licensed under CC BY-NC-SA 4.0</span></section><section class=article-lastmod><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><span>마지막 수정: May 08, 2024 00:00 KST</span></section></footer></article><div class="article-list--compact links"><article><a href=https://github.com/seungyeop-lee/blog-example/tree/main/dagger-function-introduction target=_blank rel=noopener><div class=article-details><h2 class=article-title>dagger-functions-introduction 예제</h2><footer class=article-time>https://github.com/seungyeop-lee/blog-example/tree/main/dagger-function-introduction</footer></div></a></article><article><a href=https://docs.dagger.io/ target=_blank rel=noopener><div class=article-details><h2 class=article-title>dagger docs</h2><footer class=article-time>https://docs.dagger.io/</footer></div></a></article></div><aside class=related-content--wrapper><h2 class=section-title>관련 글</h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/post/docker%EC%99%80-web-browser%EB%A1%9C-mysql-workbench-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0/><div class=article-image><img src=/post/docker%EC%99%80-web-browser%EB%A1%9C-mysql-workbench-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0/cover.2e2316c565cbe20bbe6f1a4ff0c7290a_hu35896dc72042297c9f805fb96806b36d_686296_250x150_fill_box_smart1_3.png width=250 height=150 loading=lazy alt="Featured image of post Docker와 Web browser로 MySQL Workbench 사용하기" data-hash="md5-LiMWxWXL4gu+bxpP8McpCg=="></div><div class=article-details><h2 class=article-title>Docker와 Web browser로 MySQL Workbench 사용하기</h2></div></a></article></div></div></aside><script src=https://utteranc.es/client.js repo=seungyeop-lee/seungyeop-lee.github.io issue-term=pathname label=comment crossorigin=anonymous async></script><style>.utterances{max-width:unset}</style><script>let utterancesLoaded=!1;function setUtterancesTheme(e){let t=document.querySelector(".utterances iframe");t&&t.contentWindow.postMessage({type:"set-theme",theme:`github-${e}`},"https://utteranc.es")}addEventListener("message",e=>{if(e.origin!=="https://utteranc.es")return;utterancesLoaded=!0,setUtterancesTheme(document.documentElement.dataset.scheme)}),window.addEventListener("onColorSchemeChange",e=>{if(!utterancesLoaded)return;setUtterancesTheme(e.detail)})</script><footer class=site-footer><section class=copyright>&copy;
2021 -
2024 펭귄의 외부 저장소</section><section class=powerby><a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a>로 만듦<br><a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a>의 <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.18.0>Stack</a></b> 테마 사용 중</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>